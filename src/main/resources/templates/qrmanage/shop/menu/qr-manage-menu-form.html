<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{qrmanage/shop/layout/qr-manage-shop-layout}">

<th:block layout:fragment="content">
    <div class="qr-manage-page-header">
        <h1 class="qr-manage-page-title" th:text="${menu.id != null ? '메뉴 수정' : '메뉴 등록'}">메뉴 등록</h1>
        <a th:href="@{/qr-manage/shop/admin/menu/list}" class="qr-manage-btn qr-manage-btn-secondary">목록으로</a>
    </div>

    <div class="qr-manage-card">
        <div class="qr-manage-card-body">
            <form th:action="@{/qr-manage/shop/admin/menu/save}" method="post">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <input type="hidden" name="id" th:value="${menu.id}"/>

                <div class="qr-manage-form-group">
                    <label for="categoryId">카테고리 <span class="qr-manage-required">*</span></label>
                    <select id="categoryId" name="categoryId" required>
                        <option value="">카테고리 선택</option>
                        <option th:each="cat : ${categories}"
                                th:value="${cat.id}"
                                th:text="${cat.name}"
                                th:selected="${menu.categoryId == cat.id or selectedCategoryId == cat.id}">카테고리</option>
                    </select>
                </div>

                <div class="qr-manage-form-group">
                    <label for="name">메뉴명 <span class="qr-manage-required">*</span></label>
                    <input type="text" id="name" name="name" required
                           th:value="${menu.name}" placeholder="메뉴명을 입력하세요">
                </div>

                <div class="qr-manage-form-group">
                    <label for="description">메뉴 설명</label>
                    <textarea id="description" name="description" rows="3"
                              placeholder="메뉴 설명을 입력하세요" th:text="${menu.description}"></textarea>
                </div>

                <div class="qr-manage-form-group">
                    <label for="price">가격 <span class="qr-manage-required">*</span></label>
                    <div class="qr-manage-input-group">
                        <input type="number" id="price" name="price" required min="0" step="100"
                               th:value="${menu.price}" placeholder="가격을 입력하세요">
                        <span class="qr-manage-input-suffix">원</span>
                    </div>
                </div>

                <div class="qr-manage-form-actions">
                    <button type="submit" class="qr-manage-btn qr-manage-btn-primary"
                            th:text="${menu.id != null ? '수정' : '등록'}">등록</button>
                    <a th:href="@{/qr-manage/shop/admin/menu/list}" class="qr-manage-btn qr-manage-btn-secondary">취소</a>
                </div>
            </form>
        </div>
    </div>

    <style>
        .qr-manage-form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .qr-manage-form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            resize: vertical;
        }
        .qr-manage-input-group {
            display: flex;
            align-items: center;
        }
        .qr-manage-input-group input {
            flex: 1;
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
        }
        .qr-manage-input-suffix {
            padding: 12px 15px;
            background: #f5f5f5;
            border: 1px solid #ddd;
            border-left: none;
            border-radius: 0 4px 4px 0;
            color: #666;
        }
        .qr-manage-form-actions {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }
    </style>
</th:block>

</html>
